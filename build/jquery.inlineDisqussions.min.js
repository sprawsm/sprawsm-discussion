var disqus_shortname,disqus_identifier,disqus_url;!function($){var i={};$.fn.extend({inlineDisqussions:function(e){var n={identifier:"disqussion",displayCount:!0,highlighted:!1,position:"right",background:"white",maxWidth:9999};i=$.extend({},n,e),0===$("#disqussions_wrapper").length&&$('<div id="disqussions_wrapper"></div>').appendTo($("body")),0===$("#disqus_thread").length?$('<div id="disqus_thread"></div>').appendTo("#disqussions_wrapper"):t(),i.highlighted&&$('<div id="disqussions_overlay"></div>').appendTo($("body")),$(this).each(function(i){s(i,$(this))}),i.displayCount&&a(),$("html").click(function(i){0===$(i.target).parents("#disqussions_wrapper, .main-disqussion-link-wrp").length&&d()})}});var s=function(s,t){var a;if(t.attr("data-disqus-identifier"))a=t.attr("data-disqus-identifier");else{for(;$('[data-disqus-identifier="'+window.location.pathname+i.identifier+"-"+s+'"]').length>0;)s++;a=window.location.pathname+i.identifier+"-"+s}var o=i.highlighted?"disqussion-link disqussion-highlight":"disqussion-link",r=$('<a class="'+o+'" />').attr("href",window.location.pathname+i.identifier+"-"+s+"#disqus_thread").attr("data-disqus-identifier",a).attr("data-disqus-url",window.location.href+i.identifier+"-"+s).attr("data-disqus-position",i.position).text("+").wrap('<div class="disqussion" />').parent().appendTo("#disqussions_wrapper");r.css({top:t.offset().top,left:"right"==i.position?t.offset().left+t.outerWidth():t.offset().left-r.outerWidth()}),t.attr("data-disqus-identifier",a).mouseover(function(){r.addClass("hovered")}).mouseout(function(){r.removeClass("hovered")}),r.delegate("a.disqussion-link","click",function(i){i.preventDefault(),$(this).is(".active")?(i.stopPropagation(),d()):e($(this),function(i){n(i)})})},t=function(){if(0===$("a.main-disqussion-link").length){var i=$('<a class="main-disqussion-link" />').attr("href",window.location.pathname+"#disqus_thread").text("Comments").wrap('<h2 class="main-disqussion-link-wrp" />').parent().insertBefore("#disqus_thread");i.delegate("a.main-disqussion-link","click",function(i){i.preventDefault(),$(this).is(".active")?i.stopPropagation():e($(this),function(i){n(i,!0)})})}},e=function(i,s){if(disqus_identifier=i.attr("data-disqus-identifier"),disqus_url=i.attr("data-disqus-url"),window.DISQUS)DISQUS.reset({reload:!0,config:function(){this.page.identifier=disqus_identifier,this.page.url=disqus_url}});else{var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+disqus_shortname+".disqus.com/embed.js",$("head").append(t)}$("a.disqussion-link, a.main-disqussion-link").removeClass("active").filter(i).addClass("active"),i.is(".disqussion-highlight")&&o(disqus_identifier),s(i)},a=function(){if(!$('script[src*="disqus.com/count.js"]').length){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="//"+disqus_shortname+".disqus.com/count.js",$("head").append(i);var s=0,t=setInterval(function(){s++,"object"==typeof DISQUSWIDGETS&&($(".disqussion-link").filter(function(){return $(this).text().match(/[1-9]/g)}).addClass("has-comments"),clearInterval(t)),s>10&&clearInterval(t)},1e3)}},n=function(s,t){var e={};t===!0?($("#disqus_thread").removeClass("positioned"),e={position:"static",width:"auto"}):($("#disqus_thread").addClass("positioned"),e={position:"absolute"}),e.backgroundColor=i.background;var a={};"right"==s.attr("data-disqus-position")?a={top:s.offset().top,left:s.offset().left+s.outerWidth(),width:Math.min(parseInt($(window).width()-(s.offset().left+s.outerWidth()),10),i.maxWidth)}:"left"==s.attr("data-disqus-position")&&(a={top:s.offset().top,left:s.offset().left-Math.min(parseInt(s.offset().left,10),i.maxWidth),width:Math.min(parseInt(s.offset().left,10),i.maxWidth)}),$("#disqus_thread").stop().fadeIn("fast").animate(a,"fast").css(e)},d=function(){$("#disqus_thread").stop().fadeOut("fast"),$("a.disqussion-link").removeClass("active"),$("#disqussions_overlay").fadeOut("fast"),$("body").removeClass("disqussion-highlight"),$("[data-disqus-identifier]").removeClass("disqussion-highlighted")},o=function(i){$("body").addClass("disqussion-highlight"),$("#disqussions_overlay").fadeIn("fast"),$("[data-disqus-identifier]").removeClass("disqussion-highlighted").filter('[data-disqus-identifier="'+i+'"]:not(".disqussion-link")').addClass("disqussion-highlighted")}}(jQuery);